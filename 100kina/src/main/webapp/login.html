<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="styles/bootstrap.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script type="text/javascript">
        function reset() {
            alert("Authentication failed");
            $("#reset_data").trigger("click");
        }
        var username = "";
    	function storeUserName(){
    		username = $("#userName").val();
    	}
    	var password = "";
    	function storePassword(){
    		password = $("#pwd").val();
    		
    	}
        function login() {
        	console.log(username);
    	    console.log(password);
    	    
            if (username == "") {
                return;
            }
            if (password == "") {
                return;
            }

            var userData = {
                user: {
                    userName : username,
                    password : password
                }                
            }
            $.ajax({
                url: 'rest/user/login',
                type: "POST",
                contentType: "application/json;charset=UTF-8",
                data: JSON.stringify(userData),
                statusCode: {
                    401: function() {
			        	alert("Authentication failed");
			        	$( "#reset_login" ).trigger( "click" );
			          },
                    200: function () {
                        window.location.replace("index.html");
                    }
                }
            });
        }
    </script>
</head>
<body>
    <!-- Header Navigation  -->
    <div class="navbar navbar-default navbar-fixed-top">
    	<div class="container">
    		<div class="navbar-header">
    			<a href="https://www.google.bg/" class="navbar-brand">100 KINA</a>
    			 <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		          </button>
    		</div>
    		<div class="navbar-collapse collapse" id="navbar-main">
    			<ul class="nav navbar-nav">
    				<li>
    					<a href="http://www.cinemacity.bg/movies">Program</a>
    				</li>
    				<li>
    					<a href="login.html">Login</a>
    				</li>
    				<li>
    					<a href="register.html">Register</a>
    				</li>
    			</ul>
    		</div>
    	</div>
    </div>
    
    
    
    <h1 style="text-align:center">
        <b>Login</b>
    </h1>
    <form class="form-horizontal" id="login_form" method="post">
    <fieldset>
       <div class="form-group">
         <label for="userName" class="col-lg-3 control-label col-md-offset-1">User name</label>
            <div class="col-lg-7">
            	<input type="text" onchange="storeUserName()" class="form-control" id="userName" required="required" placeholder="User name" value="" />
        	</div>
       </div>
        <div class="form-group">
            <label for="password" class="col-lg-3 control-label col-md-offset-1">Password</label>
            <div class="col-lg-7">
            	<input type="password" onchange="storePassword()" class="form-control" id="pwd" required="required" placeholder="Password" value="" />
        	</div>
        </div>
         <div class="col-lg-7 col-lg-offset-4">
        	<button type="reset" class="btn btn-default" id="reset_data">Reset</button>
        	<button type="submit" onclick="login()" class="btn btn-default">Login</button>
       	</div>
    </fieldset>
    </form>
	
</body>
</html>